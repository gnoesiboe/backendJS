/**
 * @param {Function} BaseController
 * @param {Function} Template
 * @param {Object} serviceContainer
 *
 * @returns {Function}
 */
module.exports = function(BaseController, Template, serviceContainer) {
    return BaseController.extend({

        /**
         * @param {Object} request
         * @param {Object} response
         */
        handle: function (request, response) {
            response.writeHead(200, {
                'Content-Type': 'text/html'
            });

            var myDatabase = serviceContainer.instance('app.Database'),
                q = 'SELECT * FROM user';

            myDatabase.query(q, function(users) {

                var data = {
                    title: 'Homepage',
                    users: users
                };

                (new Template(__dirname + '/../template/home.html')).render(data, function(html) {
                    response.end(html);
                }, this);
            });
        }
    });
};